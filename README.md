# ğŸ•·ï¸ AI-Powered Intelligent Crawler

ì´ í”„ë¡œì íŠ¸ëŠ” **Playwright**ì˜ ê°•ë ¥í•œ ë¸Œë¼ìš°ì € ìë™í™” ê¸°ëŠ¥ê³¼ **Google Gemini AI**ì˜ ì§€ëŠ¥í˜• íŒŒì‹± ëŠ¥ë ¥ì„ ê²°í•©í•œ ì°¨ì„¸ëŒ€ ì›¹ í¬ë¡¤ë§ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.
ë³µì¡í•œ ì›¹ í˜ì´ì§€ì˜ êµ¬ì¡°(HTML)ë¥¼ AIê°€ ì§ì ‘ ë¶„ì„í•˜ì—¬ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ë¯€ë¡œ, ê¸°ì¡´ í¬ë¡¤ëŸ¬ì²˜ëŸ¼ CSS Selectorë‚˜ XPathë¥¼ ì¼ì¼ì´ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

## ğŸš€ í•µì‹¬ ê¸°ëŠ¥ (Key Features)

### 1. ğŸ¤– AI ê¸°ë°˜ ì§€ëŠ¥í˜• íŒŒì‹± (Zero-Selector Parsing)
- HTML êµ¬ì¡°ê°€ ë³€ê²½ë˜ì–´ë„ í¬ë¡¤ëŸ¬ê°€ ê¹¨ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
- Gemini AIì—ê²Œ HTML í†µì§¸ë¡œ ë˜ì§€ê³  "ìƒí’ˆëª…, ê°€ê²©, íŒë§¤ì ì°¾ì•„ì¤˜"ë¼ê³  ìš”ì²­í•˜ë©´, ì •í™•í•œ JSON ë°ì´í„°ë¡œ ë³€í™˜í•´ì¤ë‹ˆë‹¤.
- **Minified JSON & Auto-Repair:** AI ì‘ë‹µ í† í°ì„ ì ˆì•½í•˜ê¸° ìœ„í•´ ìµœì í™”ëœ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©°, ì‘ë‹µì´ ì¤‘ê°„ì— ëŠê²¨ë„ ìë™ìœ¼ë¡œ ë³µêµ¬í•˜ì—¬ ë°ì´í„°ë¥¼ ì‚´ë ¤ëƒ…ë‹ˆë‹¤.

### 2. ğŸ•µï¸ ê°•ë ¥í•œ ìŠ¤í…”ìŠ¤ ëª¨ë“œ (Advanced Stealth)
ë´‡ íƒì§€ ì‹œìŠ¤í…œ(Anti-Bot)ì„ ìš°íšŒí•˜ê¸° ìœ„í•œ ì²¨ë‹¨ ê¸°ìˆ ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.
- **Fingerprint Spoofing:** `stealth.min.js`ë¥¼ ëŸ°íƒ€ì„ì— ì£¼ì…í•˜ì—¬ `navigator.webdriver` ìˆ¨ê¹€, Chrome ê°ì²´ ëª¨ë°©, í”ŒëŸ¬ê·¸ì¸/ì–¸ì–´ ì •ë³´ ìœ„ì¡° ë“±ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- **Human-Like Behavior:** 
  - ê¸°ê³„ì ì¸ íƒ€ì´í•‘ ëŒ€ì‹  ì˜¤íƒ€ë¥¼ ë‚´ê±°ë‚˜ ì†ë„ë¥¼ ì¡°ì ˆí•˜ëŠ” íƒ€ì´í•‘ ì‹œë®¬ë ˆì´ì…˜
  - í´ë¦­ ì „ ë§ˆìš°ìŠ¤ í˜¸ë²„(Hover) ë° ëœë¤ ë”œë ˆì´ ì ìš©
  - "ê°€ê²©ë¹„êµ ë”ë³´ê¸°" ë“± ë™ì  ìš”ì†Œ ìë™ íƒì§€ ë° ìƒí˜¸ì‘ìš©
- **Context-Level Injection:** ìƒˆ íƒ­(íŒì—…)ì´ ì—´ë ¤ë„ ìŠ¤í…”ìŠ¤ ìƒíƒœê°€ ìœ ì§€ë˜ë„ë¡ ë¸Œë¼ìš°ì € ì»¨í…ìŠ¤íŠ¸ ë ˆë²¨ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì£¼ì…í•©ë‹ˆë‹¤.

### 3. ğŸŒ ë©€í‹° í”Œë«í¼ ì§€ì›
í˜„ì¬ ë‹¤ìŒ í”Œë«í¼ì— ëŒ€í•œ ì „ìš© í¬ë¡¤ëŸ¬ê°€ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- **ë„¤ì´ë²„ ì‡¼í•‘ (Naver):** ë¬´í•œ ìŠ¤í¬ë¡¤, ê°€ê²©ë¹„êµ íŒì—… ì²˜ë¦¬ ë“± ë³µì¡í•œ ë¡œì§ ì™„ë²½ ëŒ€ì‘
- **ë§ˆì¼“ì»¬ë¦¬ (Kurly):** ê²€ìƒ‰ì–´ ì…ë ¥ ë° ì—”í„° ì²˜ë¦¬, ë¡œê·¸ì¸ ì—†ëŠ” ê³µê°œ ë°ì´í„° ìˆ˜ì§‘
- **ê¸ˆì²œë¯¸íŠ¸ (GeumCheonMeat):** B2B ì¶•ì‚°ë¬¼ ì‹œì„¸ ë°ì´í„° ìˆ˜ì§‘

### 4. âš¡ ê³ ì„±ëŠ¥ & ì•ˆì •ì„±
- **ìŠ¤ë§ˆíŠ¸ ëŒ€ê¸° ì „ëµ:** ë¬´ì‘ì • ê¸°ë‹¤ë¦¬ëŠ” `Thread.sleep` ëŒ€ì‹  `DOMCONTENTLOADED` ì´ë²¤íŠ¸ì™€ ìŠ¤ë§ˆíŠ¸í•œ íƒ€ì„ì•„ì›ƒì„ ì¡°í•©í•˜ì—¬ ì†ë„ì™€ ì•ˆì •ì„±ì„ ë™ì‹œì— ì¡ì•˜ìŠµë‹ˆë‹¤.
- **ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬:** ìŠ¤í¬ë¡¤ì„ í†µí•´ ì§€ì—° ë¡œë”©ë˜ëŠ”(Lazy Loading) ë°ì´í„°ê¹Œì§€ ëª¨ë‘ í™•ë³´í•œ í›„ AIì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤.

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)

| Category | Technology | Version |
|----------|------------|---------|
| **Language** | Java | 25 (LTS) |
| **Framework** | Spring Boot | 3.5.9 |
| **AI** | Spring AI + Google Gemini | 1.1.2 (Flash 2.0) |
| **Automation** | Microsoft Playwright | 1.57.0 |
| **Database** | MongoDB | Latest |
| **Build** | Gradle | 8.x |

## âš™ï¸ ì‹œì‘í•˜ê¸° (Getting Started)

### 1. í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
Google Gemini API ì‚¬ìš©ì„ ìœ„í•´ API í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤. `application.yml` ë˜ëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •í•˜ì„¸ìš”.

```yaml
spring:
  ai:
    gemini:
      api-key: ${GOOGLE_API_KEY} # ì‹œìŠ¤í…œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ê¶Œì¥
      chat:
        options:
          model: gemini-2.0-flash-exp # ì†ë„ì™€ ê°€ì„±ë¹„ê°€ ì¢‹ì€ ëª¨ë¸ ê¶Œì¥
```

### 2. MongoDB ì‹¤í–‰
Docker Composeë¥¼ ì‚¬ìš©í•˜ì—¬ ì†ì‰½ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
docker-compose up -d
```

### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
```bash
./gradlew bootRun
```

## ğŸ“¡ API ì‚¬ìš© ê°€ì´ë“œ

í¬ë¡¤ë§ì€ REST APIë¥¼ í†µí•´ íŠ¸ë¦¬ê±°ë©ë‹ˆë‹¤.

### ìƒí’ˆ ìˆ˜ì§‘ ìš”ì²­ (POST)

**Endpoint:** `POST /api/crawl/{platform}?keyword={keyword}`

| íŒŒë¼ë¯¸í„° | ì„¤ëª… | ì˜ˆì‹œ ê°’ |
|---|---|---|
| `platform` | í¬ë¡¤ë§ ëŒ€ìƒ í”Œë«í¼ ì½”ë“œ | `naver`, `kurly`, `gcmeat` |
| `keyword` | ê²€ìƒ‰í•  ìƒí’ˆ í‚¤ì›Œë“œ | `ì‚¼ê²¹ì‚´`, `ë…¸íŠ¸ë¶` |

**ìš”ì²­ ì˜ˆì‹œ (cURL):**
```bash
# ë„¤ì´ë²„ ì‡¼í•‘ì—ì„œ 'ê²Œì´ë° ë…¸íŠ¸ë¶' ê²€ìƒ‰
curl -X POST "http://localhost:8080/api/crawl/naver?keyword=ê²Œì´ë°ë…¸íŠ¸ë¶"

# ë§ˆì¼“ì»¬ë¦¬ì—ì„œ 'íŒŒìŠ¤íƒ€' ê²€ìƒ‰
curl -X POST "http://localhost:8080/api/crawl/kurly?keyword=íŒŒìŠ¤íƒ€"
```

**ì‘ë‹µ ì˜ˆì‹œ (JSON):**
```json
[
  {
    "id": "65a1b2c3d4e5f6...",
    "platform": "naver",
    "keyword": "ê²Œì´ë°ë…¸íŠ¸ë¶",
    "productName": "ASUS TUF Gaming F15",
    "price": 1250000,
    "unitPrice": 0,
    "seller": "ASUS ê³µì‹ìŠ¤í† ì–´",
    "productUrl": "https://search.shopping.naver.com/...",
    "crawledAt": "2026-01-12T10:00:00"
  },
  ...
]
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°
```
src/main/java/com/zoontopia/crawling
â”œâ”€â”€ controller      
â”‚   â””â”€â”€ CrawlingController.java   # API ì§„ì…ì 
â”œâ”€â”€ service
â”‚   â”œâ”€â”€ CrawlingService.java      # í¬ë¡¤ëŸ¬ íŒ©í† ë¦¬ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ GeminiParsingService.java # HTML -> JSON ë³€í™˜ (AI, ë³µêµ¬ ë¡œì§ í¬í•¨)
â”‚   â””â”€â”€ crawler                   # í”Œë«í¼ë³„ í¬ë¡¤ëŸ¬ êµ¬í˜„ì²´
â”‚       â”œâ”€â”€ ShoppingCrawler.java  # ê³µí†µ ì¸í„°í˜ì´ìŠ¤ (Stealth ìœ í‹¸ í¬í•¨)
â”‚       â”œâ”€â”€ NaverShoppingCrawler.java
â”‚       â”œâ”€â”€ MarketKurlyCrawler.java
â”‚       â””â”€â”€ GeumCheonMeatCrawler.java
â”œâ”€â”€ domain          
â”‚   â””â”€â”€ Product.java              # MongoDB ë¬¸ì„œ ë§¤í•‘ í´ë˜ìŠ¤
â””â”€â”€ resources
    â””â”€â”€ stealth.min.js            # ë´‡ íƒì§€ ìš°íšŒìš© ì£¼ì… ìŠ¤í¬ë¦½íŠ¸
```
